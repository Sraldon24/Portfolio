{% load i18n %}
<!DOCTYPE html>
<html lang="{{ LANGUAGE_CODE }}" class="scroll-smooth">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}{% trans "Portfolio" %}{% endblock %}</title>
    <meta name="description"
        content="{% trans 'Professional Portfolio displaying projects, skills, and experience.' %}">
    <meta name="author" content="Amir Sraldon">
    <meta property="og:title" content="{% trans 'Portfolio' %} - Amir Sraldon">
    <meta property="og:description"
        content="{% trans 'Professional Portfolio displaying projects, skills, and experience.' %}">
    <meta property="og:type" content="website">
    <meta property="og:url" content="{{ request.build_absolute_uri }}">
    <link rel="canonical" href="{{ request.build_absolute_uri }}">
    {% if profile and profile.profile_picture %}
    <meta property="og:image" content="{{ profile.profile_picture.url }}">
    <meta property="twitter:image" content="{{ profile.profile_picture.url }}">
    {% endif %}
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:title" content="{% trans 'Portfolio' %} - Amir Sraldon">
    <meta property="twitter:description"
        content="{% trans 'Professional Portfolio displaying projects, skills, and experience.' %}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Manrope:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Person",
            "name": "{{ profile.name|default:'Portfolio Owner'|escapejs }}",
            "url": "{{ request.build_absolute_uri }}"{% if profile and profile.profile_picture %},
            "image": "{{ profile.profile_picture.url }}"{% endif %}{% if contact_info.github_url or contact_info.linkedin_url or contact_info.twitter_url %},
            "sameAs": [{% if contact_info.github_url %}"{{ contact_info.github_url }}"{% endif %}{% if contact_info.linkedin_url %}{% if contact_info.github_url %}, {% endif %}"{{ contact_info.linkedin_url }}"{% endif %}{% if contact_info.twitter_url %}{% if contact_info.github_url or contact_info.linkedin_url %}, {% endif %}"{{ contact_info.twitter_url }}"{% endif %}]
            {% endif %}
        }
    </script>
    <style>
        :root {
            color-scheme: dark;
        }

        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #1f2937;
        }

        ::-webkit-scrollbar-thumb {
            background: #4b5563;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #6b7280;
        }

        .line-clamp-3 {
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .glass-card {
            background: linear-gradient(135deg, rgba(15, 23, 42, 0.7), rgba(2, 6, 23, 0.5));
            border: 1px solid rgba(148, 163, 184, 0.2);
            box-shadow: 0 20px 60px rgba(15, 23, 42, 0.4);
            backdrop-filter: blur(18px);
        }

        .hover-lift {
            transition: transform 0.4s ease, box-shadow 0.4s ease, border-color 0.4s ease;
        }

        .hover-lift:hover {
            transform: translateY(-10px);
            border-color: rgba(59, 130, 246, 0.6);
            box-shadow: 0 30px 80px rgba(15, 23, 42, 0.55);
        }

        .hero-avatar {
            position: relative;
            display: inline-flex;
            padding: 0.4rem;
            border-radius: 9999px;
            background: radial-gradient(circle, rgba(59, 130, 246, 0.25), transparent 70%);
        }

        .hero-avatar::before {
            content: "";
            position: absolute;
            inset: -6px;
            border-radius: 9999px;
            background: conic-gradient(from 90deg, #38bdf8, #10b981, #8b5cf6, #38bdf8);
            filter: blur(0px);
            opacity: 0.7;
            z-index: -1;
            animation: spin-slow 12s linear infinite;
        }

        .hero-avatar::after {
            content: "";
            position: absolute;
            inset: -18px;
            border-radius: 9999px;
            background: radial-gradient(circle, rgba(59, 130, 246, 0.35), transparent 70%);
            z-index: -2;
        }

        .shimmer {
            background-size: 200% 200%;
            animation: shimmer 6s ease infinite;
        }

        .page-noise::before {
            content: "";
            position: fixed;
            inset: 0;
            pointer-events: none;
            opacity: 0.05;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='160' height='160' viewBox='0 0 160 160'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='2' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='160' height='160' filter='url(%23n)'/%3E%3C/svg%3E");
            mix-blend-mode: soft-light;
            z-index: -1;
        }

        @keyframes spin-slow {
            from {
                transform: rotate(0deg);
            }
            to {
                transform: rotate(360deg);
            }
        }

        @keyframes shimmer {
            0% {
                background-position: 0% 50%;
            }
            50% {
                background-position: 100% 50%;
            }
            100% {
                background-position: 0% 50%;
            }
        }

        .skip-link {
            position: absolute;
            left: -999px;
            top: auto;
            width: 1px;
            height: 1px;
            overflow: hidden;
        }

        .skip-link:focus {
            left: 1rem;
            top: 1rem;
            width: auto;
            height: auto;
            z-index: 100;
            background: #111827;
            color: #f9fafb;
            padding: 0.5rem 1rem;
            border-radius: 9999px;
            border: 1px solid #374151;
        }

        @media (prefers-reduced-motion: reduce) {
            html {
                scroll-behavior: auto;
            }

            .hero-avatar::before,
            .shimmer {
                animation: none;
            }
        }
    </style>
</head>

<body class="bg-gray-950 text-gray-100 font-sans antialiased relative overflow-x-hidden page-noise"
    style="font-family: 'Manrope', sans-serif;">
    <div class="pointer-events-none fixed inset-0 -z-10">
        <div class="absolute -top-20 left-1/3 h-72 w-72 rounded-full bg-blue-500/20 blur-[120px]"></div>
        <div class="absolute top-1/3 right-10 h-80 w-80 rounded-full bg-emerald-500/20 blur-[140px]"></div>
        <div class="absolute bottom-0 left-10 h-96 w-96 rounded-full bg-purple-500/20 blur-[160px]"></div>
    </div>
    <div id="scroll-progress" class="fixed left-0 top-0 z-[60] h-1 w-0 bg-gradient-to-r from-blue-500 via-emerald-500 to-purple-500"></div>
    <a href="#main-content" class="skip-link">{% trans "Skip to content" %}</a>
    <!-- Navigation -->
    <nav class="fixed w-full z-50 bg-gray-900/90 backdrop-blur-sm border-b border-gray-800">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <a href="{% url 'home' %}"
                class="text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-emerald-400 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-400 focus-visible:ring-offset-2 focus-visible:ring-offset-gray-900">
                {% if profile %}{{ profile.name }}{% else %}Portfolio{% endif %}
            </a>

            <div class="flex items-center space-x-6">
                <div class="hidden md:flex space-x-6">
                    <a href="#about"
                        class="hover:text-blue-400 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-400 focus-visible:ring-offset-2 focus-visible:ring-offset-gray-900">{% trans "About" %}</a>
                    <a href="#skills"
                        class="hover:text-blue-400 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-400 focus-visible:ring-offset-2 focus-visible:ring-offset-gray-900">{% trans "Skills" %}</a>
                    <a href="#projects"
                        class="hover:text-blue-400 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-400 focus-visible:ring-offset-2 focus-visible:ring-offset-gray-900">{% trans "Projects" %}</a>
                    <a href="#contact"
                        class="hover:text-blue-400 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-400 focus-visible:ring-offset-2 focus-visible:ring-offset-gray-900">{% trans "Contact" %}</a>
                </div>

                <details class="md:hidden relative">
                    <summary
                        class="list-none cursor-pointer rounded-full border border-gray-700 px-3 py-1 text-sm text-gray-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-400 focus-visible:ring-offset-2 focus-visible:ring-offset-gray-900">
                        <span class="sr-only">{% trans "Toggle navigation" %}</span>
                        <i class="fa-solid fa-bars"></i>
                    </summary>
                    <div class="absolute right-0 mt-3 w-44 rounded-xl border border-gray-800 bg-gray-900/95 p-3 shadow-xl">
                        <a href="#about"
                            class="block rounded-lg px-3 py-2 text-sm hover:bg-gray-800 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-400 focus-visible:ring-offset-2 focus-visible:ring-offset-gray-900">{% trans "About" %}</a>
                        <a href="#skills"
                            class="block rounded-lg px-3 py-2 text-sm hover:bg-gray-800 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-400 focus-visible:ring-offset-2 focus-visible:ring-offset-gray-900">{% trans "Skills" %}</a>
                        <a href="#projects"
                            class="block rounded-lg px-3 py-2 text-sm hover:bg-gray-800 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-400 focus-visible:ring-offset-2 focus-visible:ring-offset-gray-900">{% trans "Projects" %}</a>
                        <a href="#contact"
                            class="block rounded-lg px-3 py-2 text-sm hover:bg-gray-800 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-400 focus-visible:ring-offset-2 focus-visible:ring-offset-gray-900">{% trans "Contact" %}</a>
                    </div>
                </details>

                <!-- Language Switcher -->
                <div class="flex items-center space-x-2 bg-gray-800 rounded-full px-1 py-1">
                    {% get_current_language as LANGUAGE_CODE %}
                    {% get_available_languages as LANGUAGES %}
                    {% get_language_info_list for LANGUAGES as languages %}

                    {% for language in languages %}
                    <a href="/{{ language.code }}/"
                        class="px-3 py-1 rounded-full text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-400 focus-visible:ring-offset-2 focus-visible:ring-offset-gray-900 {% if language.code == LANGUAGE_CODE %}bg-blue-600 text-white shadow-lg{% else %}text-gray-400 hover:text-white{% endif %}">
                        {{ language.code|upper }}
                    </a>
                    {% endfor %}
                </div>
            </div>
        </div>
    </nav>

    <main id="main-content" class="pt-16">
        {% if messages %}
        <div class="container mx-auto px-4 mt-6">
            {% for message in messages %}
            <div
                class="p-4 rounded-md {% if message.tags == 'success' %}bg-green-900/50 text-green-200 border border-green-800{% else %}bg-red-900/50 text-red-200 border border-red-800{% endif %}">
                {{ message }}
            </div>
            {% endfor %}
        </div>
        {% endif %}

        {% block content %}{% endblock %}
    </main>

    <footer class="bg-gray-900 border-t border-gray-800 py-8 mt-20">
        <div class="container mx-auto px-4 text-center text-gray-500">
            <p>&copy; {% now "Y" %} {% if profile %}{{ profile.name }}{% endif %}. {% trans "All rights reserved." %}
            </p>
        </div>
    </footer>

    <script>
        const progressBar = document.getElementById('scroll-progress');
        const updateProgress = () => {
            const scrollTop = window.scrollY || document.documentElement.scrollTop;
            const height = document.documentElement.scrollHeight - window.innerHeight;
            const progress = height > 0 ? (scrollTop / height) * 100 : 0;
            if (progressBar) {
                progressBar.style.width = `${progress}%`;
            }
        };
        document.addEventListener('scroll', updateProgress, { passive: true });
        window.addEventListener('resize', updateProgress);
        updateProgress();
    </script>
</body>

</html>
